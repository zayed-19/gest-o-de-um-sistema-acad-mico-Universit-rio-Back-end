generator client {
  provider = "prisma-client-js"  
  binaryTargets = ["native", "debian-openssl-3.0.x", "linux-arm64-openssl-3.0.x"]
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
  
}

model notificacoes{
  id Int @id @default(autoincrement())
  tipo_notificacao String @db.VarChar(100)
  data_envio DateTime @db.Date
  informacao String @db.LongText
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt


  @@map("notificacoes")
}

model cargo{
  id Int @id @default(autoincrement())
  nome String @db.VarChar(100)
  descricao String @db.LongText
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("cargo")
}


model documento{
  id Int @id @default(autoincrement())
  tipo_documento String @db.VarChar(100)
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt


  @@map("documento")
}


model professor{
  id Int @id @default(autoincrement())
  nome String @db.VarChar(100)
  bi_passaporte String @db.VarChar(50)
  telefone String @db.VarChar(20)
  email String @db.VarChar(100)
  Curso curso[]
  Avaliacao avaliacao[]
  Turmaprof turmaprof[]
  Disciprof disciprof[]
  Cursoprof cursoprof[]
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("professor")
}


model disciplina{
  id Int @id @default(autoincrement())
  tipo_disciplina String @db.VarChar(100)
  Presenca presenca[]
  Turmadisci turmadisci[]
  Disciprof disciprof[]
  Discicurso discicurso[]
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("disciplina")
}

model fatura{
  id Int @id @default(autoincrement())
  data_emissao DateTime @db.Date
  valor_total Decimal @db.Decimal(10,2)
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt
  Itensfatura itensfatura[]
  Pagamento pagamento[]

  
  @@map("fatura")
}

model emolumento{
  id Int @id @default(autoincrement())
  referencia Int @db.Int
  valor Decimal @db.Decimal(10,2)
  Itensfatura itensfatura[]
  Pagamento pagamento[]
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("emolumento")
}


model faculdades{
  id Int @id @default(autoincrement())
  tipos_faculdades String @db.VarChar(100)
  Curso curso[]
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("faculdades")
}

model aluno{
  id Int @id @default(autoincrement())
  nome String @db.VarChar(100)
  dataNasc DateTime @db.Date
  genero String @db.VarChar(20)
  morada String @db.VarChar(200)
  telefone String @db.VarChar(20)
  idade Int @db.Int
  id_turma Int @db.Int
  Turma turma @relation(fields: [id_turma], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt
  Avaliacao avaliacao[]
  Pagamento pagamento[]
  Matricula matricula[]
  Presenca presenca[]
  Historico_matricula historico_matricula[]

  @@map("aluno")
}


model turma{
  id Int @id @default(autoincrement())
  nome String @db.VarChar(100)
  id_curso Int @db.Int
  Curso curso @relation(fields: [id_curso], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt
  Aluno aluno[]
  Turmadisci turmadisci[]
  Turmaprof turmaprof[]

  @@map("turma")
}

model curso{
  id Int @id @default(autoincrement())
  nome String @db.VarChar(100)
  duracao String @db.VarChar(50)
  id_faculdades Int @db.Int
  Faculdades faculdades @relation(fields: [id_faculdades], references: [id])
  id_professor Int @db.Int
  Professor professor @relation(fields: [id_professor], references: [id])
  Turma turma[]
  Discicurso discicurso[]
  Cursoprof cursoprof[]
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("curso")
}



model avaliacao{
  id Int @id @default(autoincrement())
  tipo_avaliacao String @db.VarChar(100)
  nota Int @db.Int
  data_avaliacao DateTime @db.Date
  id_aluno Int @db.Int
  Aluno aluno @relation(fields: [id_aluno], references: [id])
  id_professor Int @db.Int
  Professor professor @relation(fields: [id_professor], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("avaliacao")
}


model itensfatura{
  id Int @id @default(autoincrement())
  valortotal Decimal @db.Decimal(10,2)
  nr_fatura Int @db.Int
  id_fatura Int @db.Int
  Fatura fatura @relation(fields: [id_fatura], references: [id])
  id_emolumento Int @db.Int
  Emolumento emolumento @relation(fields: [id_emolumento], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("itensfatura")
}


model pagamento{
  id Int @id @default(autoincrement())
  metodo_pagamento String @db.VarChar(100)
  data_pagamento DateTime @db.Date
  valor Decimal @db.Decimal(20,2)
  id_aluno Int @db.Int
  Aluno aluno @relation(fields: [id_aluno], references: [id])
  id_emolumento Int @db.Int
  Emolumento emolumento @relation(fields: [id_emolumento], references: [id])
  id_fatura Int @db.Int
  Fatura fatura @relation(fields: [id_fatura], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("pagamento")
}

model matricula{
  id Int @id @default(autoincrement())
  ano_lectivo String @db.VarChar(50)
  data_matricula DateTime @db.Date
  estado_matricula String @db.VarChar(50)
  id_aluno Int @db.Int
  Aluno aluno @relation(fields: [id_aluno], references: [id])
  Historico_matricula historico_matricula[]
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt



  @@map("matricula")
}


model historico_matricula{
  id Int @id @default(autoincrement())
  id_aluno Int @db.Int
  Aluno aluno @relation(fields: [id_aluno], references: [id])
  id_matricula Int @db.Int
  Matricula matricula @relation(fields: [id_matricula], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt
  
  @@map("historico_matricula")
  }


model presenca{
  id Int @id @default(autoincrement())
  data_presenca DateTime @db.Date
  status String @db.VarChar(50)
  id_aluno Int @db.Int
  Aluno aluno @relation(fields: [id_aluno], references: [id])
  id_disciplina Int @db.Int
  Disciplina disciplina @relation(fields: [id_disciplina], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt



@@map("presenca")
}


model turmadisci{
  id Int @id @default(autoincrement())
  id_turma Int @db.Int
  Turma turma @relation(fields: [id_turma], references: [id])
  id_disciplina Int @db.Int
  Disciplina disciplina @relation(fields: [id_disciplina], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt



  @@map("turmadisci")
}


model turmaprof{
  id Int @id @default(autoincrement())
  id_turma Int @db.Int
  Turma turma @relation(fields: [id_turma], references: [id])
  id_professor Int @db.Int
  Professor professor @relation(fields: [id_professor], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt
  
  @@map("turmaprof")
}


model disciprof{
  id Int @id @default(autoincrement())
  id_disciplina Int @db.Int
  Disciplina disciplina @relation(fields: [id_disciplina], references: [id])
  id_professor Int @db.Int
  Professor professor @relation(fields: [id_professor], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt
  
  @@map("disciprof")
}


model discicurso{
  id Int @id @default(autoincrement())
  id_disciplina Int @db.Int
  Disciplina disciplina @relation(fields: [id_disciplina], references: [id])
  id_curso Int @db.Int
  Curso curso @relation(fields: [id_curso], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("discicurso")
}



model cursoprof{
  id Int @id @default(autoincrement())
  id_curso Int @db.Int
  Curso curso @relation(fields: [id_curso], references: [id])
  id_professor Int @db.Int
  Professor professor @relation(fields: [id_professor], references: [id])
  create_at DateTime @default(now()) @db.Timestamp(6)
  update_at DateTime @updatedAt

  @@map("cursoprof")
}

